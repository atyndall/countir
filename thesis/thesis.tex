\documentclass{../cshonours}
\usepackage{subfiles}
\usepackage{url}
\usepackage{graphics}
\usepackage{etoolbox}
\usepackage{bibunits}
\usepackage{amsfonts}
\usepackage{fixltx2e}
\usepackage{tabularx}
\usepackage{accsupp}
\usepackage{pifont}
\usepackage{abbrevs}
\usepackage{acronym}
\usepackage[vario]{fancyref}
\usepackage{threeparttable}
\usepackage{tikz}
\usepackage{forest}
\usepackage{hyperref}
\usepackage{xspace}
\usepackage{ccicons}
\usepackage{textcomp}
\usepackage{listings}
\usepackage{multicol}
\usepackage{enumerate}
\usepackage{rotating}
\usepackage{tabularx}
\usepackage{calc}
\usepackage{color}
\usepackage{minted}

\newcommand{\thetitle}{Developing a robust system for occupancy detection in the household}
\newcommand{\theauthor}{Ash Tyndall}

\newcommand{\thekeywords}{keyword, keyword}
\newcommand{\thecategories}{category, category}

%%% BEGIN LATEX TWEAKS

% Tikz initialize
\usetikzlibrary{shapes, arrows, positioning, fit}
\tikzstyle{dashbox} = [rectangle, dashed, draw=black]
\tikzstyle{box} = [rectangle, draw=black, minimum width=3cm, minimum height=1cm, text centered, text width=3cm]
\tikzstyle{cbox} = [cloud, cloud puffs=15.7, minimum height=1cm, draw]
\tikzstyle{line} = [thin,-,>=stealth]
\tikzstyle{fbox} = [box, dotted, rounded corners=1mm]
\tikzstyle{fcont} = [rectangle, draw=black, minimum width=6cm, minimum height=2.5cm, text centered, text width=6cm]

% Check marks and cross marks
\newcommand{\cmark}{\hspace{7mm}\BeginAccSupp{ActualText=Y}\checkmark\EndAccSupp{}}
\newcommand{\xmark}{\hspace{7mm}\BeginAccSupp{ActualText=N}\ding{55}\EndAccSupp{}}
\newcommand{\ssup}{\textsuperscript{1}}
\newcommand{\tsup}{\textsuperscript{2}}

% Configure bibliography
\bibliographystyle{acm}
\defaultbibliography{../references/primary}
\defaultbibliographystyle{acm}

% Namelist stuff for proposal
\newcommand{\namelistlabel}[1]{\mbox{#1}\hfil}
\newenvironment{namelist}[1]{%1
\begin{list}{}
    {
        \let\makelabel\namelistlabel
        \settowidth{\labelwidth}{#1}
        \setlength{\leftmargin}{1.1\labelwidth}
    }
  }{%1
\end{list}}

% Additional table options
\newcommand*{\csbox}[1]{\parbox[c]{1.7cm}{\centering #1}}
\newcolumntype{"}{@{\hskip\tabcolsep\vrule width 1pt\hskip\tabcolsep}}

% Acronyms for common stuff
\newcommand{\acrodefn}[3]{%
	\acrodef{#1}[#2]{#3}%
	\expandafter\newcommand\csname#1\endcsname{\ac{#1}\xspace}%
}

\acrodefn{pir}{PIR}{Passive Infrared Sensor}
\acrodefn{iar}{IAR}{Infrared Array Sensor}
\acrodefn{mlx}{\textit{Melexis}}{Melexis MLX90620}
\acrodefn{emwa}{EMWA}{Exponential Weighted Moving Average}
\acrodefn{lowpan}{6LoWPAN}{IPv6 over Low power Wireless Personal Area Networks}
\acrodefn{coap}{CoAP}{Constrained Application Protocol}
\acrodefn{iot}{IoT}{Internet of Things}
\acrodefn{rest}{REST}{Representational state transfer}
\acrodefn{roll}{RPL}{IPv6 Routing Protocol for Low-Power and Lossy Networks}
\acrodefn{ws}{WS-*}{Web Services Descriptive Language / Simple Object Access Protocol}

% Abbreviation commands for common stuff
\newabbrev\cdi{CO\textsubscript{2}}
\newabbrev\lwifi{802.15.4}
\newabbrev\lmed{802.15.4e}
\newabbrev\lphy{802.15.4-2006}
\newabbrev\etal{et al.}
\newabbrev\iic{$\textrm{I}^2\textrm{C}$}
\newabbrev\ard{Arduino}

% Fancyref support for subsections, source; https://github.com/openlilylib/tutorials/blob/master/aGervasoni/orchestralScores/example-materials/OLLbase.sty
\newcommand*{\fancyrefsubseclabelprefix}{subsec}

\fancyrefaddcaptions{english}{%
  \providecommand*{\frefsubsecname}{subsection}%
  \providecommand*{\Frefsubsecname}{Subsection}%
}

\frefformat{plain}{\fancyrefsubseclabelprefix}{\frefsubsecname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefsubseclabelprefix}{\Frefsubsecname\fancyrefdefaultspacing#1}

\frefformat{vario}{\fancyrefsubseclabelprefix}{%
  \frefsubsecname\fancyrefdefaultspacing#1#3%
}
\Frefformat{vario}{\fancyrefsubseclabelprefix}{%
  \Frefsubsecname\fancyrefdefaultspacing#1#3%
}

% Fancyref support for subsubsections, source; https://github.com/openlilylib/tutorials/blob/master/aGervasoni/orchestralScores/example-materials/OLLbase.sty
\newcommand*{\fancyrefsubsubseclabelprefix}{subsubsec}

\fancyrefaddcaptions{english}{%
  \providecommand*{\frefsubsubsecname}{subsection}% the same as for subsection
  \providecommand*{\Frefsubsubsecname}{Subsection}%
}

\frefformat{plain}{\fancyrefsubsubseclabelprefix}{\frefsubsubsecname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefsubsubseclabelprefix}{\Frefsubsubsecname\fancyrefdefaultspacing#1}

\frefformat{vario}{\fancyrefsubsubseclabelprefix}{%
  \frefsubsubsecname\fancyrefdefaultspacing#1#3%
}
\Frefformat{vario}{\fancyrefsubsubseclabelprefix}{%
  \Frefsubsubsecname\fancyrefdefaultspacing#1#3%
}

% Enable subsubsections
\setcounter{secnumdepth}{3} % Enable level 4-5
\setcounter{tocdepth}{3}    % Include level 4-5 in TOC

% Reset acronym definitions in each section and chapter
\preto\section\acresetall
\preto\chapter\acresetall

% Hyperref setup
\hypersetup{pdftitle=\thetitle,pdfauthor=\theauthor,pdfsubject=\thecategories,pdfkeywords=\thekeywords,hidelinks}

% Listing styles
\lstdefinestyle{arduino}{
  frame=single,
  basicstyle=\scriptsize\ttfamily,
}

\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\tiny\ttfamily,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  %captionpos=b,                    % sets the caption-position to bottom
  %commentstyle=\color{mygreen},    % comment style
  %deletekeywords={...},            % if you want to delete keywords from the given language
  %escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=single,                    % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  %keywordstyle=\color{blue},       % keyword style
  %language=Octave,                 % the language of the code
  %morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny, % the style that is used for the line-numbers
  %rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  %stringstyle=\color{mymauve},     % string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
  keywordstyle=\bfseries\color{green!40!black},
  commentstyle=\itshape\color{purple!40!black},
  identifierstyle=\color{blue},
  stringstyle=\color{orange},
}

% Square table config
\newcolumntype{z}[1] {
  @{{\centering \parbox[c]{\tabcolsep}{\rule{0pt}{#1 + 2\tabcolsep}}}}
  >{\centering\arraybackslash}
  m{#1} }
% 
\renewcommand{\tabularxcolumn}[1]{z{#1}}

% TOC in PDF bookmarks
\makeatletter
\usepackage{etoolbox}
\pretocmd{\tableofcontents}{%
  \if@openright\cleardoublepage\else\clearpage\fi
  \pdfbookmark[0]{\contentsname}{toc}%
}{}{}%
\makeatother

\makeatletter
\usepackage{etoolbox}
\pretocmd{\listoffigures}{%
  \if@openright\cleardoublepage\else\clearpage\fi
  \pdfbookmark[0]{\listfigurename}{lof}%
}{}{}%
\makeatother

\makeatletter
\usepackage{etoolbox}
\pretocmd{\listoftables}{%
  \if@openright\cleardoublepage\else\clearpage\fi
  \pdfbookmark[0]{\listtablename}{lot}%
}{}{}%
\makeatother

% Configure titles
\title{\thetitle}
\author{\theauthor}
\keywords{\thekeywords}
\categories{\thecategories}
%%% END LATEX TWEAKS

\begin{document}
\newcommand{\mainfile}{} % we use the existance of this command to see if we're compiling the whole thesis or just a chapter

\maketitle

\begin{abstract}
This is the abstract.
\end{abstract}

\newpage
\null
\vfill 
\noindent{\fontsize{40pt}{1em}\selectfont \ccbysa}

\null

\noindent\textcopyright\xspace 2014--15 Ashley Ben Tyndall

\noindent This document is released under a Creative Commons Attribution-ShareAlike 4.0 International License. A copy of this license can be found at \\ \url{http://creativecommons.org/licenses/by-sa/4.0/}.

\noindent A digital copy of this document and supporting files can be found at \\ \url{http://github.com/atyndall/honours}. % TODO: Change URLS to ash.id.au redirs

\noindent The following text can be used to satisfy attribution requirements:

\noindent ``This work is based on the honours research project of Ash Tyndall,  developed with the help of the School of Computer Science and Software Engineering at The University of Western Australia. A copy of this project can be found at \\ \url{http://github.com/atyndall/honours}.''
	
\noindent Code and code excerpts included in this document are instead released under the GNU General Public License v3, and can be found in their entirety at \\ \url{https://github.com/atyndall/thing}.

\newpage

\begin{acknowledgements}
These are the acknowledgements.

% TODO: Any thesis, dissertation or other publication resulting from research undertaken by the recipient while in receipt of the Hackett Foundation Alumni Honours Scholarship must acknowledge the support of the scholarship and carry the University by-line.
\end{acknowledgements}

\tableofcontents
\listoftables
\listoffigures


\subfile{../introduction/introduction}
\subfile{../litreview/litreview}
\subfile{../architecture/architecture}
\subfile{../sensor/sensor}
\subfile{../methods/methods}
\subfile{../results/results}
\subfile{../discussion/discussion}

\appendix

\chapter{Original Honours Proposal}
\subfile{../proposal/proposal}

\chapter{Code Listings}


\section{ThingLib}
\subsection{cam.py}
\inputminted[fontsize=\footnotesize,breaklines=true,linenos=true]{python}{../../code/coordinator/processing/thinglib/cam.py}
\subsection{pxdisplay.py}
\inputminted[fontsize=\footnotesize,breaklines=true,linenos=true]{python}{../../code/coordinator/processing/thinglib/pxdisplay.py}
\subsection{features.py}
\inputminted[fontsize=\footnotesize,breaklines=true,linenos=true]{python}{../../code/coordinator/processing/thinglib/features.py}

\section{Arduino Sketch}
\inputminted[fontsize=\footnotesize,breaklines=true,linenos=true]{C++}{../../code/node/mlx90620_driver/mlx90620_driver.ino}

\clearpage

\addcontentsline{toc}{chapter}{Bibliography}
\bibliography{../references/primary}

\end{document}


